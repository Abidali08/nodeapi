<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid black; padding: 10px; text-align: left; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
    <h2>Employee Management</h2>
    
    <h3>Add Employee</h3>
    <input type="text" id="firstName" placeholder="First Name">
    <input type="text" id="lastName" placeholder="Last Name">
    <input type="email" id="email" placeholder="Email">
    <input type="text" id="phone" placeholder="Phone Number">
    <input type="text" id="jobId" placeholder="Job ID">
    <input type="text" id="departmentId" placeholder="Department ID">
    <button onclick="addEmployee()">Add Employee</button>
    
    <h3>Employee List</h3>
    <table id="employeesTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Job ID</th>
                <th>Department ID</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        const BASE_URL = "https://super-disco-7pj9jg69qwvcw6qx-3000.app.github.dev/";

        function fetchEmployees() {
            fetch(`${BASE_URL}/employees`)
                .then(res => res.json())
                .then(data => {
                    const table = document.querySelector("#employeesTable tbody");
                    console.log(10);
                    table.innerHTML = data.map(employee => `
                        <tr>
                            <td>${employee.employee_id}</td>
                            <td>${employee.first_name}</td>
                            <td>${employee.last_name}</td>
                            <td>${employee.email}</td>
                            <td>${employee.phone_number}</td>
                            <td>${employee.job_id}</td>
                            <td>${employee.department_id}</td>
                            <td>
                                <button onclick="updateEmployee(${employee.employee_id})">Update</button>
                                <button onclick="deleteEmployee(${employee.employee_id})">Delete</button>
                            </td>
                        </tr>`).join("");
                });
        }

        function addEmployee() {
            const employee = {
                first_name: document.getElementById("firstName").value,
                last_name: document.getElementById("lastName").value,
                email: document.getElementById("email").value,
                phone_number: document.getElementById("phone").value,
                job_id: document.getElementById("jobId").value,
                department_id: document.getElementById("departmentId").value,
            };
            fetch(`${BASE_URL}/employees`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(employee)
            }).then(() => fetchEmployees());
        }

        function deleteEmployee(id) {
            fetch(`${BASE_URL}/employees/${id}`, { method: "DELETE" })
                .then(() => fetchEmployees());
        }

        function updateEmployee(id) {
            const newFirstName = prompt("Enter new first name:");
            const newLastName = prompt("Enter new last name:");
            fetch(`${BASE_URL}/employees/${id}`, {
                method: "PUT",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ first_name: newFirstName, last_name: newLastName })
            }).then(() => fetchEmployees());
        }

        document.addEventListener("DOMContentLoaded", fetchEmployees);
    </script>
</body>
</html>
